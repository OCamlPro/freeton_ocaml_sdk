; generated by drom from package skeleton 'rust_binding_lib'

(rule
 (targets libfreeton_ocaml_rust.a dllfreeton_ocaml_rust.so)
 (deps (glob_files *.rs))
 (action
  (progn
   (run cargo build --target-dir %{project_root}/../../_build/target --release)
   (run sh -c
     "mv %{project_root}/../../_build/target/release/libfreeton_ocaml_rust.so ./dllfreeton_ocaml_rust.so 2> /dev/null || \
      mv %{project_root}/../../_build/target/release/libfreeton_ocaml_rust.dylib ./dllfreeton_ocaml_rust.so")
   (run mv %{project_root}/../../_build/target/release/libfreeton_ocaml_rust.a libfreeton_ocaml_rust.a))))

(library
 (name freeton_ocaml_rust)
 (public_name freeton_ocaml_rust)
 (wrapped false)
 (libraries zarith ezjsonm ez_file ez_api.encoding ez_api.cohttp_lwt cohttp-lwt-unix )
 (foreign_archives freeton_ocaml_rust)
 (c_library_flags
  (-lpthread -lc -lm -lssl -lcrypto (:include dune.include)))
  
  (preprocess (pps ppx_deriving_encoding))
  )


(documentation
  (package freeton_ocaml_rust))


